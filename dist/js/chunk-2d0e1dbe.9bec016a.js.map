{"version":3,"sources":["webpack:///./src/views/user/Products.vue","webpack:///./src/components/infoModal.vue","webpack:///./src/components/infoModal.vue?436e","webpack:///./src/views/user/Products.vue?be1b"],"names":["class","width","productsData","item","index","key","id","src","imageUrl","alt","title","origin_price","price","type","infoOpen","addCart","ref","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","productData","content","category","unit","data","modal","infoId","mounted","this","$refs","infoModal","keyboard","backdrop","methods","open","url","$http","then","res","success","product","show","alert","message","catch","err","console","log","response","postData","product_id","qty","post","render","components","infomodal","created","getData","get","products","infoComponent"],"mappings":"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","file":"js/chunk-2d0e1dbe.9bec016a.js","sourcesContent":["<template>\n  <div class=\"container\">\n        <table class=\"table mt-4\">\n          <thead>\n            <tr>\n              <th width=\"250\">\n                圖片\n              </th>\n              <th>商品名稱</th>\n              <th>\n                售價\n              </th>\n              <th>\n                編輯\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(item,index) in productsData\" :key=\"item.id\">\n              <td><img :src=\"item.imageUrl\" class=\"img-thumbnail\" alt=\"\"></td>\n              <td>{{item.title}}</td>\n              <td>\n                <div>打折前{{item.origin_price}} </div>\n                <div class=\"h3\">打折後{{item.price}}</div>\n              </td>\n              <!-- <td class=\"text-end\">{{item.price}}</td> -->\n              <td>\n                <div class=\"btn-group\">\n                  <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" @click=\"infoOpen(index)\">\n                      詳細資訊\n                    <!-- <span v-if=\"spinnerId===index\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> -->\n                  </button>\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"addCart(item.id)\">\n                    加入購物車\n                    <!-- <span v-if=\"spinnerId===item.id\" class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span> -->\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <infomodal ref=\"infoComponent\"></infomodal>\n        <!-- <pagination :pagination=pagination :page=page @refesh=\"getData\"></pagination> -->\n      </div>\n</template>\n\n<script>\nimport infomodal from '@/components/infoModal.vue';\n\nexport default {\n  data() {\n    return {\n      productsData: [],\n      infoId: '',\n    };\n  },\n  components: {\n    infomodal,\n  },\n  created() {\n    this.getData();\n  },\n  methods: {\n    getData() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(url).then((res) => {\n        this.productsData = res.data.products;\n      });\n    },\n    addCart(id) {\n      console.log(id);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const postData = { product_id: id, qty: 1 };\n      this.$http.post(url, { data: postData })\n        .then((res) => {\n          if (res.data.success) {\n            alert(res.data.message);\n            this.getData();\n          } else {\n            alert(res.data.message);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    infoOpen(index) {\n      this.infoId = this.productsData[index].id;\n      this.$refs.infoComponent.open(this.infoId);\n    },\n  },\n};\n</script>\n","<template>\n  <div id=\"productModal2\" ref=\"infoModal\" class=\"modal fade\" tabindex=\"-1\" aria-labelledby=\"productModalLabel\"\n        aria-hidden=\"true\">\n     <div class=\"modal-dialog modal-lg\">\n       <div class=\"modal-content border-0\">\n         <div class=\"modal-header bg-dark text-white\">\n           <h5 id=\"productModalLabel\" class=\"modal-title\">\n             詳細資訊\n           </h5>\n           <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n         </div>\n         <div class=\"modal-body\">\n            <div class=\"row\">\n            <div class=\"col-8\">\n              <div class=\"card\">\n                <img :src=\"productData.imageUrl\" class=\"card-img-top\" alt=\"...\">\n                <div class=\"card-body\">\n                  <p class=\"card-text\">{{productData.content}}</p>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-4\">\n                <ul class=\"list-group\">\n                  <li class=\"list-group-item\">產品名稱 {{productData.title}}</li>\n                  <li class=\"list-group-item\">種類 {{productData.category}}</li>\n                  <li class=\"list-group-item\">單位 {{productData.unit}}</li>\n                  <li class=\"list-group-item\">原價 {{productData.origin_price}}</li>\n                  <li class=\"list-group-item\">折扣價 {{productData.price}}</li>\n                </ul>\n                <div>\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm mt-1\" @click=\"addCart\">\n                    加入購物車\n                  </button>\n                </div>\n            </div>\n\n            </div>\n         </div>\n       </div>\n     </div>\n   </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  data() {\n    return {\n      productData: [],\n      modal: '',\n      infoId: '',\n    };\n  },\n  // props: [\n  //   'infoId',\n  // ],\n  mounted() {\n    this.modal = new Modal(this.$refs.infoModal, {\n      keyboard: false,\n      backdrop: 'static',\n    });\n  },\n  methods: {\n    open(id) {\n      this.infoId = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/product/${this.infoId}`;\n      this.$http(url)\n        .then((res) => {\n          if (res.data.success) {\n            // console.log(res.data.product)\n            this.productData = res.data.product;\n            this.modal.show();\n          } else {\n            alert(res.data.message);\n          }\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    addCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const postData = { product_id: this.infoId, qty: 1 };\n      this.$http.post(url, { data: postData })\n        .then((res) => {\n          if (res.data.success) {\n            alert(res.data.message);\n          } else {\n            alert(res.data.message);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n};\n</script>\n","import { render } from \"./infoModal.vue?vue&type=template&id=26e5c5e2\"\nimport script from \"./infoModal.vue?vue&type=script&lang=js\"\nexport * from \"./infoModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Products.vue?vue&type=template&id=4ad06f73\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}